
name: heroku

on:
  push:
    branches:
        - main

jobs:
  deploy:

    runs-on: ubuntu-latest
    if: github.event_name == 'push'

    steps:

      # Realiza el login 
      - uses: actions/checkout@v2
      - 
        name: Login to Heroku
        env:
            HEROKU_TOKEN: ${{ secrets.HEROKU_TOKEN }}
        run: heroku login -i

      # Build and Deploy
      - 
        name: Build and Deploy
        env:
            HEROKU_TOKEN: ${{ secrets.HEROKU_TOKEN }}
        run: "gradle build deployHeroku"
